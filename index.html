<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>하루 기록 &amp; 할 일 관리자</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles/app.css" />
  </head>
  <body>
    <header class="top-bar">
      <div>
        <h1>하루 기록 &amp; 할 일 관리자</h1>
        <p class="subtitle">
          하루를 정리하고 감사한 순간을 기록해 보세요. 저장된 데이터는 인사이트 대시보드와 바로 연결됩니다.
        </p>
      </div>
      <nav class="header-actions" aria-label="주요 작업">
        <a class="ghost-button" href="insights.html">인사이트 대시보드</a>
        <button type="button" class="ghost-button" id="export-button">JSON 내보내기</button>
        <label class="ghost-button file-button" for="import-input">
          JSON 불러오기
          <input id="import-input" type="file" accept="application/json" hidden />
        </label>
      </nav>
    </header>

    <main>
      <section class="panel" aria-labelledby="stats-title">
        <div class="panel-header">
          <h2 id="stats-title">기록 요약</h2>
          <p class="helper-text">최근 기록 현황을 간단히 확인하세요.</p>
        </div>
        <div class="stats-grid">
          <article class="stat-card">
            <h3>총 기록</h3>
            <strong id="stat-total-entries">0</strong>
            <span class="stat-detail" id="stat-period">기록을 추가해 보세요.</span>
          </article>
          <article class="stat-card">
            <h3>평균 만족도</h3>
            <strong id="stat-average-satisfaction">-</strong>
            <span class="stat-detail" id="stat-satisfaction-count">만족도 데이터를 추가해 보세요.</span>
          </article>
          <article class="stat-card">
            <h3>할 일 완료율</h3>
            <strong id="stat-completion-rate">-</strong>
            <span class="stat-detail" id="stat-completion-detail">등록된 할 일이 없습니다.</span>
          </article>
          <article class="stat-card">
            <h3>연속 기록</h3>
            <strong id="stat-streak">0일</strong>
            <span class="stat-detail" id="stat-longest-streak">연속 기록을 시작해 보세요.</span>
          </article>
        </div>
      </section>

      <section class="panel" aria-labelledby="form-title">
        <div class="panel-header">
          <h2 id="form-title">새 기록 추가</h2>
          <p class="helper-text">
            오늘 완료한 할 일과 감사한 순간을 기록하면, 인사이트 페이지에서 자동으로 시각화됩니다.
          </p>
        </div>
        <form id="entry-form" class="entry-form">
          <div class="form-grid">
            <div class="field">
              <label for="entry-date">기록 날짜</label>
              <input id="entry-date" name="date" type="date" required />
            </div>
            <div class="field satisfaction-field">
              <label for="entry-satisfaction">만족도 (0~5)</label>
              <div class="range-field">
                <input id="entry-satisfaction" type="range" min="0" max="5" step="0.5" value="3" />
                <span id="satisfaction-display" aria-live="polite">3.0</span>
              </div>
              <label class="checkbox">
                <input id="skip-satisfaction" type="checkbox" />
                만족도 입력하지 않음
              </label>
            </div>
            <div class="field full">
              <label for="entry-note">오늘의 메모 (선택)</label>
              <textarea
                id="entry-note"
                name="note"
                rows="3"
                placeholder="느낀 점이나 내일을 위한 메모를 적어보세요."
              ></textarea>
            </div>
          </div>

          <fieldset class="fieldset">
            <legend>할 일 목록</legend>
            <p class="helper-text">오늘 계획하거나 완료한 할 일을 입력하고 완료 여부를 표시하세요.</p>
            <div class="inline-form">
              <input id="task-input" type="text" placeholder="할 일을 입력하고 Enter 또는 추가 버튼을 누르세요." />
              <button type="button" id="add-task-button" class="ghost-button">추가</button>
            </div>
            <ul id="task-list" class="chip-list" aria-live="polite"></ul>
          </fieldset>

          <fieldset class="fieldset">
            <legend>감사한 일 (선택)</legend>
            <div class="inline-form">
              <input id="gratitude-input" type="text" placeholder="감사했던 순간을 하나씩 입력하세요." />
              <button type="button" id="add-gratitude-button" class="ghost-button">추가</button>
            </div>
            <ul id="gratitude-list" class="chip-list" aria-live="polite"></ul>
          </fieldset>

          <div class="form-actions">
            <button type="submit" class="primary-button">기록 저장</button>
            <button type="reset" class="ghost-button">초기화</button>
          </div>
          <p id="form-message" class="helper-text" role="status"></p>
        </form>
      </section>

      <section class="panel" aria-labelledby="entries-title">
        <div class="panel-header">
          <h2 id="entries-title">저장된 기록</h2>
          <div class="entries-controls">
            <label class="filter">
              <span>월별 보기</span>
              <input id="month-filter" type="month" />
            </label>
            <label class="filter">
              <span>검색</span>
              <input id="search-input" type="search" placeholder="메모, 감사 키워드, 할 일을 검색" />
            </label>
            <button type="button" id="clear-filters" class="ghost-button small">필터 초기화</button>
          </div>
        </div>
        <div id="entries-container" class="entries-container" aria-live="polite"></div>
      </section>
    </main>

    <script type="module" src="scripts/app.js"></script>
  </body>
</html>
